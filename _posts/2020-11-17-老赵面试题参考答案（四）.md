---
layout:     post
title:      老赵面试题参考答案（四）
subtitle:   
date:       2020-11-17
author:     coderidea
header-style: text
catalog: true
tags:
- C#
--- 
<div class="postBody">
			<div id="cnblogs_post_body" class="blogpost-body"><h5>　  泛型的作用是什么？它有什么优势？它对性能有影响吗？它在执行时的行为是什么？.NET BCL中有哪些泛型类型？举例说明平时编程中您定义的泛型类型。</h5>
<p>　　 泛型的作用是什么？</p>
<p>　　 泛型的作用在于“算法的重用”。（这点其实很好理解，原来的ArrayList只能接受Object，现在通过List可以接受任何类型，也就是说ArrayList的方法都被各个类型重用了。但是Dot Net的泛型有个比较制肘地方，就是你很难对数值类型（值类型）进行算法抽象，因为这牵涉到运算符重载的问题，同时Dot Net的泛型的类型参数也不能约束成一个基元值类型（如int、double、float） 。）</p>
<p>　　 它有什么优势？</p>
<p>　　 第一：源代码保护。（如果你知道C++模板对泛型的实现机制，就会知道C++在编译的时候根据对泛型的调用，自动“内联”了一个实现，这样泛型的内容就暴露了，尔DotNet的实现方式就不同了，泛型类和方法会被编译成IL，在执行的时候由JIT负责将IL变化为指定类型参数的本地代码，从而保护了源代码）</p>
<p>　　 第二：类型安全。（这点是最显而易见的，抛弃了使用ArrayList时各种丑陋的强制类型转换）</p>
<p>　　 第三：更清晰地代码。因为没有了强制类型转换，所以代码自然显得更清晰，但是使用泛型时候带来的&lt;&gt;有时候确实也会让人搞糊涂，幸好泛型方法可以用类型推断或者using语句来进一步简化写法。</p>
<p>　　 第四：更好的性能，因为值类型可以避免装箱和拆箱所带来的损耗（垃圾回收的次数也会减少）。（这点正是泛型神奇的地方，开发历史上抽象能力的上升往往意味着性能的下降，但是泛型却不是！泛型抽象了算法，但是C++和DotNet对泛型的实现能够让性能无损，并且更快。Java的擦除法泛型就没有这种性能上的好处。）</p>
<p></p>
<p>　　 它对性能有影响吗？</p>
<p>  　 对性能有积极的影响，因为值类型可以避免装箱和拆箱所带来的负面影响，避免了垃圾回收，使得性能显著提高。但是对引用类型这种影响就不明显了。但是需要注意的是首次为一个特定数据类型调用方法时，CLR都会为这个方法生成本地代码。这会增大应用程序的工作集大小，从而影响性能。</p>
<p></p>
<p>　　 它在执行时的行为是什么？</p>
<p>　　 使用泛型类型参数的一个方法在进行JIT编译时，CLR获取IL，用指定的类型实参进行替换，然后创建本地代码。需要特别注意的是引用类型是共享代码的，而对值类型就会为每一种生成独立的一份类型代码。但是需要指出的是引用类型的这种代码共享并不会造成封闭类型只执行一次构造函数（就算是静态构造函数也是这样的）。</p>
<p></p>
<p>　　 .NET BCL中有哪些泛型类型？</p>
<p>  　List、Dictionary、Queue、Stack、SortedList和SortedDictionary、LinkedList等等。</p>
<p></p>
<p>　　举例说明平时编程中您定义的泛型类型。</p>
<p>      泛型的出现会替换原来一部分使用多态的地方从而提高性能和带来更好的编译时检查，这样就不需要在子类和超类（接口）间频繁转换了。比如你要根据情况打出各种报表，那么先把报表类定义成泛型类从而可以共享报表一系列的算法。


</p></div><div id="MySignature"></div>
<div class="clear"></div>
<div id="blog_post_info_block">
<div id="BlogPostCategory"></div>
<div id="EntryTag"></div>
<div id="blog_post_info">
</div>
<div class="clear"></div>
<div id="post_next_prev"></div>
</div>


		</div>